<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' 'unsafe-inline';"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sync App</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <header>
        <div class="title-block">
          <img
            class="logo"
            src="public/icons/sync-app.png"
            alt="Sync App logo"
          />
          <div>
            <h1>
              Sync App <span id="appVersion" class="version">v1.0.0</span>
            </h1>
            <p>Fast, safe backups with rsync.</p>
          </div>
        </div>
        <div class="header-actions">
          <button id="openReleaseNotes" class="ghost small">Release Notes</button>
          <button id="openHelp" class="ghost small">Help</button>
          <button id="openTerms" class="ghost small">Terms</button>
          <button id="checkUpdates" class="ghost small">Update</button>
          <label class="toggle compact">
            <input id="autoUpdateToggle" type="checkbox" />
            <span class="toggle-pill"></span>
            <span>Auto‑Update</span>
          </label>
        </div>
      </header>

      <section class="card">
        <div class="field">
          <label for="sourcePath">Source folder</label>
          <div class="field-row">
            <input id="sourcePath" type="text" readonly placeholder="Choose source…" />
            <button id="chooseSource">Select</button>
          </div>
        </div>
        <div class="field">
          <label for="destinationPath">Destination folder</label>
          <div class="field-row">
            <input
              id="destinationPath"
              type="text"
              readonly
              placeholder="Choose destination…"
            />
            <button id="chooseDestination">Select</button>
          </div>
        </div>
        <div class="field">
          <label for="excludePatterns">Exclude patterns</label>
          <textarea
            id="excludePatterns"
            rows="3"
            placeholder=".git&#10;node_modules&#10;*.tmp"
          ></textarea>
          <p class="helper">
            One pattern per line. Examples: <code>.git</code>, <code>node_modules</code>,
            <code>*.tmp</code>.
          </p>
        </div>
        <div class="field">
          <label class="toggle">
            <input id="preserveRootToggle" type="checkbox" />
            <span class="toggle-pill"></span>
            <span>Preserve root folder in destination</span>
          </label>
          <p class="helper">
            When enabled, copies the source folder itself (not just its contents).
          </p>
        </div>
        <div class="actions">
          <button id="startSync" class="primary">Start Sync</button>
          <button id="previewSync" class="ghost">Preview</button>
          <button id="cancelSync" class="ghost" disabled>Cancel</button>
          <button id="openLogFolder" class="ghost">Open Log Folder</button>
          <button id="openDestination" class="ghost">Open Destination</button>
        </div>
        <p id="statusMessage" class="status">Ready.</p>
      </section>

      <section class="card">
        <div class="progress-header">
          <h2>Progress</h2>
          <span id="progressPercent">0%</span>
        </div>
        <div class="progress-bar">
          <div id="progressFill"></div>
        </div>
        <div class="stream" id="streamLog" aria-live="polite"></div>
      </section>

      <section class="card">
        <div class="progress-header">
          <h2>History</h2>
          <span id="historyCount">0 runs</span>
        </div>
        <div id="historyList" class="history-list"></div>
      </section>
    </div>

    <div id="releaseNotesModal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content card">
        <div class="modal-header">
          <h2 id="releaseNotesTitle">Release Notes</h2>
          <button id="closeReleaseNotes" class="ghost small">Close</button>
        </div>
        <div id="releaseNotesBody" class="modal-body"></div>
      </div>
    </div>

    <div id="helpModal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content card">
        <div class="modal-header">
          <h2>Help</h2>
          <button id="closeHelp" class="ghost small">Close</button>
        </div>
        <div class="modal-body" id="helpBody">
          <h3>Folders</h3>
          <ul>
            <li><strong>Source folder:</strong> What you want to back up.</li>
            <li><strong>Destination folder:</strong> Where the backup goes.</li>
            <li><strong>Open Destination:</strong> Opens the destination in Finder.</li>
          </ul>

          <h3>Sync Options</h3>
          <ul>
            <li><strong>Exclude patterns:</strong> One per line (e.g., <code>.git</code>, <code>node_modules</code>, <code>*.tmp</code>).</li>
            <li><strong>Preserve root folder:</strong> Copies the source folder itself into destination.</li>
            <li><strong>Preview:</strong> Dry‑run to show what would change without copying.</li>
          </ul>

          <h3>Actions</h3>
          <ul>
            <li><strong>Start Sync:</strong> Begins the copy.</li>
            <li><strong>Cancel:</strong> Stops an active sync.</li>
            <li><strong>Open Log Folder:</strong> Opens log files for each run.</li>
          </ul>

          <h3>Updates</h3>
          <ul>
            <li><strong>Update:</strong> Checks for updates (or installs if ready).</li>
            <li><strong>Auto‑Update:</strong> Checks automatically on launch.</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="termsModal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content card">
        <div class="modal-header">
          <h2>Terms of Use</h2>
          <button id="closeTerms" class="ghost small">Close</button>
        </div>
        <div class="modal-body" id="termsBody"></div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
